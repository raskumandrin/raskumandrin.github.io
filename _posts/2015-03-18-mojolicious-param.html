---
url: mojolicious-param
title: Метод Param контроллера от версии к версии Mojolicious
excerpt: |
    <p>Часто от проекта к проекту копируются какие-то куски кода. Это в свою очередь порой оказывается причиной неожиданных ошибок.</p>

categories: work
tags: [perl]
js: [highlight]

---
<p>Часто от проекта к проекту копируются какие-то куски кода. Это в свою очередь
	порой оказывается причиной неожиданных ошибок.</p>
	
<p>В форме на веб-странице есть динамический набор полей, которые
	в виде параметров отправляются на сервер. На сервере из всех параметров выбираются нужные,
	и после этого уже с ними происходит работа.</p>

<p>Сначала был такой код:</p>
	

<pre><code># mojolicious до версии 6

foreach ( map { (/^count-(\d+)/) } $self->param ) {
	...
	$self->param("count-$_")
	...
}</code></pre>

<p>А документация раньше выглядела так:</p>

<p><img src="https://pub-3e57dc6805fe47c580cebfca6d4f2436.r2.dev/2015-03-18-mojolicious-param/ver5.png" "mojolicious ver 5 param"></p>

<p>... где метод Param контроллера возвращал список всех имён переданных параметров.</p>

<p>Теперь документация выглядит так:</p>

<p><img src="https://pub-3e57dc6805fe47c580cebfca6d4f2436.r2.dev/2015-03-18-mojolicious-param/ver6.png" "mojolicious ver 6 param"></p>

<p>Пример со списком всех параметров пропал. Он <a href="https://github.com/kraih/mojo/commit/61f1e703979a9ff2b31b794aeb9a8b18335acbd6">действительно был исключён</a>
в шестой версии Mojolicious, но это как-то осталось упущенным.</p>

<p>Теперь для перебора всех переданных параметров работает такая конструкция:</p>

<pre><code># mojolicious начиная с версии 6

foreach ( map { (/^count-(\d+)/) } @{$self->req->params->names} ) {
	...
	$self->param("count-$_")
	...
}</code></pre>

